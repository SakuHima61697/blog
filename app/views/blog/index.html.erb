<div class="blog-index">
    <h1 class="page-title">ブログ一覧</h1>
<br></br>
<%= search_form_for @q, :url => { :controller => :blog, :action => :index } do |f| %>
  <%= f.label :title_or_genre_or_user_name, "ブログ名、ジャンル名、ユーザー名で検索", class: "blog-search-form" %>
  <%= f.search_field :title_or_genre_or_user_name_cont %>
  <%= f.submit "検索", class: "btn btn-primary" %>
<% end %>
<br></br>
<tr>
  <th><%= sort_link(@q, :title, "タイトル", class: "blog-index-link") %></th>
  <th><%= sort_link(@q, :genre, "ジャンル", class: "blog-genre") %></th>
  <th><%= sort_link(@q, :user_name, "作成者", class: "blog-user_name") %></th>
  <th><%= sort_link(@q, :created_at, "作成日", class: "blog-created_at") %></th>
  <th colspan="3"></th>
</tr>
<br></br>
    <table class="blog-title">
        <% @users.each do |user| %>
        <% @posts.each do |post| %>
        <tr>
            <td><%= link_to(post.title, "/blogs/show/#{post.id}", class: "blog-index-link") %></td>
            <td class="blog-genre"><%= post.genre %></td>
            <td class="blog-user_name"><%= link_to(post.user_name, "/blogs/user/#{user.id}", class: "blog-index-link") %></td>
            <td class="blog-created_at"><%= post.created_at.strftime("%Y年%m月%d日") %></td>
            <% if post.user_id == @current_user&.id %>
            <td><%= link_to("編集", "/blogs/update/#{post.id}", class: "blog-index-link btn btn-success") %></td>
            <td><%= link_to("削除", "blogs/delete/#{post.id}", class: "blog-index-link btn btn-danger") %></td>
            <% end %>
        </tr>
        <% end %>
        <% end %>
    </table>
    <br></br>
    <%= paginate @posts %>
</div>
<br></br>